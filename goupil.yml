targets:

  all_goupil:
    depends:
      - processed_data/goupil.rda
      - processed_data/goupil_artists.rda
      - processed_data/goupil_stock_book_nos.rda
      - processed_data/goupil_buyers.rda
      - processed_data/goupil_previous_owners.rda

  goupil_with_ids:
    command: produce_goupil_ids(raw_goupil)

  goupil:
    command: produce_goupil(goupil_with_ids)
  processed_data/goupil.rda:
    command: save(goupil, file = target_name)

  goupil_artists:
    command: produce_goupil_artists(goupil_with_ids)
  processed_data/goupil_artists.rda:
    command: save(goupil_artists, file = target_name)

  goupil_stock_book_nos:
    command: produce_goupil_stock_book_nos(goupil_with_ids)
  processed_data/goupil_stock_book_nos.rda:
    command: save(goupil_stock_book_nos, file = target_name)

  goupil_buyers:
    command: produce_goupil_buyers(goupil_with_ids)
  processed_data/goupil_buyers.rda:
    command: save(goupil_buyers, file = target_name)

  goupil_previous_owners:
    command: produce_goupil_previous_owners(goupil_with_ids)
  processed_data/goupil_previous_owners.rda:
    command: save(goupil_previous_owners, file = target_name)

  joined_goupil:
    command: produce_joined_goupil(goupil, goupil_artists, goupil_buyers, goupil_previous_owners, raw_goupil_present_location_ulan)


