sources:
  - R/

packages:
  - tidyverse
  - rematch2
  - igraph
  - assertr

include:
  - knoedler.yml
  - raw_data.yml
  - sales_contents.yml
  - goupil.yml

targets:
  all:
    depends:
      - all_authorities
      - all_sales_contents
      - all_knoedler
      - all_goupil
      - all_raw_data

  all_authorities:
    depends:
      - processed_data/artists_authority.rda
      - processed_data/owners_authority.rda
      - processed_data/union_person_ids.rda
      - processed_data/exchange_rates.rda
      - processed_data/us_cpi.rda

  artists_authority:
    command: produce_artists_authority(raw_artists_authority)
  processed_data/artists_authority.rda:
    command: save(artists_authority, file = target_name)

  gpi_artists_nationality_aat:
    command: produce_gpi_artists_nationality_aat(raw_gpi_artist_nationality_aat)

  owners_authority:
    command: produce_owners_authority(raw_owners_authority)
  processed_data/owners_authority.rda:
    command: save(owners_authority, file = target_name)

  combined_authority:
    command: produce_combined_authority(owners_authority, artists_authority)

  union_person_ids:
    command: produce_union_person_ids(
      knoedler_artists = knoedler_artists_lookup,
      knoedler_buyers = knoedler_buyers_lookup,
      knoedler_sellers = knoedler_sellers_lookup,
      knoedler_joint_owners = knoedler_joint_owners_lookup,
      sales_contents_artists = sales_contents_artists_lookup)
  processed_data/union_person_ids.rda:
    command: save(union_person_ids, file = target_name)

  currency_aat:
    command: produce_currency_ids(raw_sales_contents_auth_currencies, raw_currencies_aat)
  processed_data/currency_aat.rda:
    command: save(currency_aat, file = target_name)

  exchange_rates:
    command: produce_exchange_rates(raw_exchange_rates)
  processed_data/exchange_rates.rda:
    command: save(exchange_rates, file = target_name)

  us_cpi:
    command: produce_cpi(raw_us_cpi)
  processed_data/us_cpi.rda:
    command: save(us_cpi, file = target_name)

